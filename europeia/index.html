<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="noindex">
<title>Finan√ßas pessoais</title>
<style>
body { font-size: 7vmin; padding:0; margin:0; border:0; font-family:sans-serif; text-align:center }
div.diapositivo { height:100vh; width:100vw; display:grid; place-items:center }
	div.diapositivo:nth-child(even) { background-color:green; color:white }
	div.diapositivo:nth-child(odd) { background-color:white; color:green }
h1 { margin:0; padding:0; letter-spacing:-.05em; line-height:.9em; transform: scaleY(0.9); }
img { height: 85vh; }
table { font-size:.7em; margin:0; padding:0; background-color:inherit }
thead { font-weight:700 }
td { text-align:center; padding:.2em; line-height:1.25em; vertical-align:top }
td:first-child { text-align:left }
input { font-family:inherit; font-size:1em; width:4em; text-align:right; border-width:0 0 .2em; background:none; color:inherit; outline:none }
</style>

</head>
<body>

<div class="diapositivo ativo">
<h1 style="text-transform:uppercase; font-size:4.5em">Finan√ßas pessoais</h1>
</div>

<div class="diapositivo">
<h1>David Almas</h1>
</div>

<div class="diapositivo">
<h1>ex-jornalista,</h1>
</div>

<div class="diapositivo">
<h1>investidor,</h1>
</div>

<div class="diapositivo">
<h1>pregui√ßoso,</h1>
</div>

<div class="diapositivo">
<h1>aposentado aos 41 anos.</h1>
</div>

<div class="diapositivo">
<h1>como?</h1>
</div>

<div class="diapositivo">
<img src="carteira.jpg">
</div>

<div class="diapositivo">
<h1>estudar<br>trabalhar<br>poupar<br>investir</h1>
</div>

<div class="diapositivo">
<h1>Economia<br>An√°lise Financeira<br>Finan√ßas<br>+<br>üß†</h1>
</div>

<div class="diapositivo">
<h1>Jornal de Neg√≥cios<br>‚Üì<br>&hellip;<br>‚Üì<br>Observador</h1>
</div>

<div class="diapositivo">
<img src="minhareforma.jpg">
</div>

<div class="diapositivo" style="background-color:white">
<h1><a href="">tlim.pt/minhareforma</a></h1>
</div>

<div class="diapositivo">
<h1>poupan√ßa ‚âà 40% &times; rendimentos</h1>
</div>

<div class="diapositivo">
<h1>üè° = <strike>&nbsp;35&nbsp;</strike> 6 anos</h1>
</div>

<div class="diapositivo">
<h1>100% a√ß√µes</h1>
</div>

<div class="diapositivo">
<h1>r<sub>2000</sub> > 9%</h1>
</div>

<div class="diapositivo">
<h1>r<sub>2013</sub> = 12%</h1>
</div>

<div class="diapositivo">
<h1>comer, beber, ver os filhos crescer</h1>
</div>

<div class="diapositivo">
<h1>comer, beber, socializar, viajar, ver&nbsp;os&nbsp;filhos&nbsp;crescer</h1>
</div>

<div class="diapositivo">
<h1>miss√£o: finan√ßas pessoais<br>ve√≠culo: boletim tlim</h1>
</div>

<div class="diapositivo">
<h1>finan√ßas pessoais?</h1>
</div>

<div class="diapositivo">
<h1>usa todo o conhecimento para otimizar recursos privados</h1>
</div>

<div class="diapositivo">
<h1 style="font-size:1.5em"><em>fp</em>(recursos) = max { bem-estar }</h1>
</div>

<div class="diapositivo">
<h1>Prioridade?</h1>
</div>

<div class="diapositivo">
<h1>Qual a melhor m√°quina de&nbsp;lavar&nbsp;roupa?</h1>
</div>

<div class="diapositivo" style="grid-template-columns:1fr 1fr">
	<div>
	<img src="hisense.jpg" style="height:30vh">
	<h1>Hisense <small>WF1G7021BW</small><br>299,99‚Ç¨</h1>
	</div>
	<div>
	<img src="indesit.jpg" style="height:30vh">
	<h1>Indesit <small>IM762MTSPT</small><br>379,99‚Ç¨</h1>
	</div>
</div>

<div class="diapositivo" style="grid-template-columns:1fr 1fr">
<div><img src="etiqueta-hisense.png"></div>
<div><img src="etiqueta-indesit.png"></div>
</table>
</div>

<div class="diapositivo">
<table id="mll">
<thead>
<tr><td><td>Hisense<td>Indesit
<tbody>
<tr><td>Pre√ßo<td><input type="text" value="299,99" id="m1">‚Ç¨<td><input type="text" value="379,99" id="m2">‚Ç¨
<tr><td>Energia<td><input type="text" value="51" id="e1" style="width:1.5em"> kWh/100 ciclos<td><input type="text" value="44" id="e2" style="width:1.5em"> kWh/100 ciclos
<tr><td>√Ågua<td><input type="text" value="37" id="a1" style="width:1.5em"> l/ciclo<td><input type="text" value="43" id="a2" style="width:1.5em"> l/ciclo
<tr><td>kWh<td colspan="2"><input type="text" value="0,0000" id="pe" style="width:3.5em">‚Ç¨
<tr><td>m¬≥<td colspan="2"><input type="text" value="0,0000" id="pa" style="width:3.5em">‚Ç¨
<tr><td>Frequ√™ncia<td colspan="2"><input type="text" value="0" id="freq" style="width:1.5em"> por semana
<tr><td colspan="3" style="text-align:center"><strong id="anos">&nbsp;</strong>
</table>
</div>

<div class="diapositivo">
<h1>O que fazer a 80‚Ç¨?</h1>
</div>

<div class="diapositivo" style="display:flex;height:100vh">
<style>
.controls{ font-size:.5em; text-align:left; padding:0 0 0 .8em}
.chart-area{flex:1;display:flex;align-items:center;justify-content:center;padding:1.5em}
svg{width:100%;height:100%;display:block}
.axis text{font-size:12px;fill:#222}
.axis line, .axis path{stroke:#ccc}
.grid line{stroke:#eee}
.line-a{fill:none;stroke:#1f77b4;stroke-width:2.5}
.line-b{fill:none;stroke:#ff7f0e;stroke-width:2.5}
.dot{stroke:#fff;stroke-width:1}
.label-final{font-size:13px;fill:#111;font-weight:600}
</style>
<div class="controls">
	<p>C = <input id="initial" value="80" style="width:4em">‚Ç¨
	<p>r<sub>1</sub> = <input id="rate1" value="1" style="width:3em">%/ano
	<p>r<sub>2</sub> = <input id="rate2" value="0" style="width:3em">%/ano
	<p>t = <input id="years" value="1" style="width:2em"> anos
	<p>Mensal = <input id="monthly" value="0" style="width:3em">‚Ç¨
</div>

<div class="chart-area">
	<svg id="svg" viewBox="0 0 800 520">
		<defs><clipPath id="plotClip"><rect x="60" y="20" width="680" height="420"/></clipPath></defs>

		<!-- eixos e grade -->
		<g class="grid" transform="translate(0,0)"></g>
		<g class="axis" transform="translate(0,0)"></g>

		<!-- linhas e pontos -->
		<g clip-path="url(#plotClip)">
			<path class="line-a" id="pathA" d=""/>
			<path class="line-b" id="pathB" d=""/>
			<g id="pointsA"></g>
			<g id="pointsB"></g>
		</g>

		<!-- r√≥tulos finais -->
		<g id="endLabels"></g>
	</svg>
</div>

<script>
(() => {
  const svg = document.getElementById('svg');
  const pathA = document.getElementById('pathA');
  const pathB = document.getElementById('pathB');
  const pointsA = document.getElementById('pointsA');
  const pointsB = document.getElementById('pointsB');
  const gridG = svg.querySelector('.grid');
  const axisG = svg.querySelector('.axis');
  const endLabels = document.getElementById('endLabels');

  const initialEl = document.getElementById('initial');
  const rate1El = document.getElementById('rate1');
  const rate2El = document.getElementById('rate2');
  const yearsEl = document.getElementById('years');
  const monthlyEl = document.getElementById('monthly');

  const margin = {left:60, right:66, top:20, bottom:60};
  const width = 800, height = 520;
  const plotW = width - margin.left - margin.right;
  const plotH = height - margin.top - margin.bottom;

  function parseNumber(v){
  if (v === null || v === undefined) return 0;
  // aceitar strings e numbers; remover espa√ßos e s√≠mbolos como ‚Ç¨
  let s = String(v).trim().replace(/\s+/g,'').replace(/‚Ç¨/g,'');
  // aceitar v√≠rgula como separador decimal
  s = s.replace(',', '.');
  const n = Number(s);
  return Number.isFinite(n) ? n : 0;
}

  function computeSeries(initial, annualRatePct, years, monthly) {
    const r = annualRatePct/100;
    const monthlyContrib = monthly;
    const points = [];
    let balance = initial;
    points.push({year:0,value:Math.round(balance*100)/100});
    for (let y=1;y<=years;y++){
      // apply monthly contributions and compounding monthly for accuracy
      const monthlyRate = Math.pow(1+r,1/12)-1;
      for (let m=0;m<12;m++){
        balance = balance*(1+monthlyRate) + monthlyContrib;
      }
      points.push({year:y,value:Math.round(balance*100)/100});
    }
    return points;
  }

function niceMax(v){
  if (v <= 0) return 1;
  const pow = Math.pow(10, Math.floor(Math.log10(v)));
  const norm = v / pow;
  let nice;
  if (norm <= 1) nice = 1;
  else if (norm <= 1.5) nice = 1.5;
  else if (norm <= 2) nice = 2;
  else if (norm <= 2.5) nice = 2.5;
  else if (norm <= 5) nice = 5;
  else if (norm <= 7.5) nice = 7.5;
  else nice = 10;
  return nice * pow;
}


  function render(){
    const initial = parseNumber(initialEl.value);
    const rate1 = parseNumber(rate1El.value);
    const rate2 = parseNumber(rate2El.value);
    const years = Math.max(1, Math.round(parseNumber(yearsEl.value)));
    const monthly = parseNumber(monthlyEl.value);

    const seriesA = computeSeries(initial, rate1, years, monthly);
    const seriesB = computeSeries(initial, rate2, years, monthly);

// determine y scale (suporta valores negativos corretamente)
let maxVal = Math.max(...seriesA.map(d=>d.value), ...seriesB.map(d=>d.value));
let minVal = Math.min(...seriesA.map(d=>d.value), ...seriesB.map(d=>d.value));

// adicionar pequeno padding relativo ao intervalo (ou absoluto m√≠nimo)
const range = Math.max(1, maxVal - minVal);
const pad = range * 0.05;

// raw extents com padding
const rawTop = maxVal + pad;
const rawBottom = minVal - pad;

// Fun√ß√£o auxiliar para escolher "nice" inferior (similar a niceMax mas para m√≠nimos)
function niceMin(v){
  if (v >= 0) return 0;
  const abs = Math.abs(v);
  const pow = Math.pow(10, Math.floor(Math.log10(abs)));
  const norm = abs / pow;
  let nice;
  if (norm <= 1) nice = 1;
  else if (norm <= 2) nice = 2;
  else if (norm <= 2.5) nice = 2.5;
  else if (norm <= 5) nice = 5;
  else nice = 10;
  return -nice * pow;
}

// escolher yTop com niceMax como antes
let yTop = niceMax(rawTop);

// ajustar yTop se ficar demasiado acima do necess√°rio
if (yTop > rawTop && (yTop - rawTop) / Math.max(1, rawTop) > 0.15) {
  const try1 = yTop / 2;
  const try2 = yTop / 2.5;
  if (try2 >= rawTop) yTop = try2;
  else if (try1 >= rawTop) yTop = try1;
}
if (yTop < rawTop) yTop = rawTop;

// escolher yBottom: se rawBottom >= 0, usar 0; se negativo, usar niceMin mas sem ficar acima de rawBottom
let yBottom;
if (rawBottom >= 0) {
  yBottom = 0;
} else {
  const candidate = niceMin(rawBottom);
  // garantir que candidate <= rawBottom (ou seja, n√£o cortar os valores reais)
  if (candidate <= rawBottom) yBottom = candidate;
  else {
    // se candidate for menos negativo (ex.: -100k) e rawBottom √© -197723, permitimos rawBottom arredondado para baixo
    // arredondar para o inteiro inferior por ordem de grandeza
    const pow = Math.pow(10, Math.floor(Math.log10(Math.abs(rawBottom))));
    yBottom = -Math.ceil(Math.abs(rawBottom) / pow) * pow;
  }
}
    function xForYear(y){ return margin.left + (y/(years)) * plotW; }
    function yForValue(v){
      const t = (v - yBottom) / (yTop - yBottom || 1);
      return margin.top + (1 - t) * plotH;
    }

    // draw grid and axes
    gridG.innerHTML = '';
    axisG.innerHTML = '';

    // horizontal grid lines and y labels: choose 5 lines
    const yTicks = 5;
    for (let i=0;i<=yTicks;i++){
      const t = i / yTicks;
      const val = yBottom + (1 - t) * (yTop - yBottom);
      const yy = margin.top + t * plotH;
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1',margin.left);
      line.setAttribute('x2',margin.left+plotW);
      line.setAttribute('y1',yy);
      line.setAttribute('y2',yy);
      line.setAttribute('stroke','#eee');
      gridG.appendChild(line);

      const text = document.createElementNS('http://www.w3.org/2000/svg','text');
      text.setAttribute('x',margin.left-8);
      text.setAttribute('y',yy+4);
      text.setAttribute('text-anchor','end');
      text.setAttribute('font-size',12);
      text.setAttribute('fill','#222');
      text.textContent = Math.round(val).toLocaleString('pt-PT', {maximumFractionDigits:0});
      axisG.appendChild(text);
    }

    // x axis ticks: only even years (0,2,4,...)
    for (let y=0;y<=years;y++){
      if (y % 2 !== 0) continue;
      const xx = xForYear(y);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1',xx);
      line.setAttribute('x2',xx);
      line.setAttribute('y1',margin.top);
      line.setAttribute('y2',margin.top+plotH);
      line.setAttribute('stroke', '#fff0');
      axisG.appendChild(line);

      const text = document.createElementNS('http://www.w3.org/2000/svg','text');
      text.setAttribute('x',xx);
      text.setAttribute('y', margin.top + plotH + 20);
      text.setAttribute('text-anchor','middle');
      text.setAttribute('font-size',12);
      text.setAttribute('fill','#222');
      text.textContent = String(y);
      axisG.appendChild(text);
    }

    // build paths and points
    function buildPath(series){
      return series.map((p,i) => {
        const x = xForYear(p.year);
        const y = yForValue(p.value);
        return (i===0?('M '+x+' '+y):('L '+x+' '+y));
      }).join(' ');
    }

    pathA.setAttribute('d', buildPath(seriesA));
    pathB.setAttribute('d', buildPath(seriesB));

    // points
    pointsA.innerHTML = '';
    pointsB.innerHTML = '';
    seriesA.forEach(p => {
      const cx = xForYear(p.year);
      const cy = yForValue(p.value);
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',4);
      c.setAttribute('fill','#1f77b4'); c.setAttribute('class','dot');
      pointsA.appendChild(c);
    });
    seriesB.forEach(p => {
      const cx = xForYear(p.year);
      const cy = yForValue(p.value);
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',4);
      c.setAttribute('fill','#ff7f0e'); c.setAttribute('class','dot');
      pointsB.appendChild(c);
    });

    // final labels (only final numeric labels to the right of last point)
    endLabels.innerHTML = '';
    const lastA = seriesA[seriesA.length-1];
    const lastB = seriesB[seriesB.length-1];

    function makeLabel(x,y,text,color){
      const g = document.createElementNS('http://www.w3.org/2000/svg','g');
      const t = document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('x', x + 8);
      t.setAttribute('y', y + 4);
      t.setAttribute('fill', color);
      t.setAttribute('class','label-final');
      t.textContent = text;
      g.appendChild(t);
      return g;
    }

    endLabels.appendChild(makeLabel(xForYear(years), yForValue(lastA.value), lastA.value.toLocaleString('pt-PT',{minimumFractionDigits:2, maximumFractionDigits:2}), '#1f77b4'));
    endLabels.appendChild(makeLabel(xForYear(years), yForValue(lastB.value) + 16, lastB.value.toLocaleString('pt-PT',{minimumFractionDigits:2, maximumFractionDigits:2}), '#ff7f0e'));
  }

  // attach listeners
  [initialEl, rate1El, rate2El, yearsEl, monthlyEl].forEach(el => {
    el.addEventListener('input', render);
    el.addEventListener('change', render);
  });

  // initial render
  render();

})();
</script>
</div>


<div class="diapositivo">
<img src="db.png">
</div>

<div class="diapositivo">
<h1>O dinheiro ‚Äúapenas √© bom enquanto serve para que se n√£o pense nele.‚Äù<br><strong style="font-weight:normal">Agostinho da Silva</strong></h1>
</div>

<div class="diapositivo">
<h1>FIRE<br>financial independence,<br>retire early</h1>
</div>

<div class="diapositivo">
<h1>IFRA<br>independ√™ncia financeira<br>e reforma antecipada</h1>
</div>

<div class="diapositivo">
<h1>independ√™ncia financeira:<br>dinheiro suficiente para se fazer o que se quiser</h1>
</div>

<div class="diapositivo" style="background-color:white">
<h1><a href="https://tlim.pt/zero/#M~22~0.01~60~0.25~0~0~60~0.25~0~0~60~0.25~0" target="_blank">tlim.pt/zero</a></h1>
</div>

<div class="diapositivo">
<h1>tlim.pt/europeia</h1>
</div>

<div class="diapositivo">
<h1>david@tlim.pt</h1>
</div>

<script>
const diapositivos = document.getElementsByClassName('diapositivo');
let atual = 0;

if (localStorage.getItem('atual')) { atual = parseInt(localStorage.getItem('atual')); }

document.addEventListener('keydown', (evento) => {
	const tecla = evento.key.toLowerCase();
	if (tecla !== 's' && tecla !== 'w' && tecla !== 'enter') return;
	switch (tecla) {
		case 's':
		case 'enter':
			if (atual < diapositivos.length - 1) { atual++; }
			break;
		case 'w':
			if (atual > 0) { atual--; }
			break;
    }
	diapositivos[atual].scrollIntoView({ behavior: 'smooth' });
	localStorage.setItem('atual', atual);
});

window.addEventListener('wheel', (event) => {
	if (event.deltaY > 0) {
		if (atual < diapositivos.length - 1) atual++; }
	else {
		if (atual > 0) atual--; }
    diapositivos[atual].scrollIntoView({ behavior: 'smooth' });
    localStorage.setItem('atual', atual);
});


function num(el, dig) {
	const e = document.getElementById(el),
	z = e.value.replace(/[^\d]/g,'')/Math.pow(10,dig);
	e.value = z.toLocaleString('pt-PT',{minimumFractionDigits:dig, maximumFractionDigits:dig});
	return z; }

function esc(el, n, dig) {
	const e = document.getElementById(el);
	const x = n.toLocaleString('pt-PT',{minimumFractionDigits:dig,maximumFractionDigits:dig});
	const t = e.tagName.toLowerCase();
	t === 'input' ? e.value = x : e.innerText = x; }


function fmll() {
	let m1 = num('m1', 2), m2 = num('m2', 2), e1 = num('e1', 0), e2 = num('e2', 0), a1 = num('a1', 0), a2 = num('a2', 0), freq = num('freq', 0), pe = num('pe', 4), pa = num('pa', 4);

	let difp = m1 - m2;
	let difciclo = e1 / 100 * pe + a1 * pa / 1000 - e2 / 100 * pe - a2 * pa / 1000;

	let tanos;
	if (freq < 1) {
		tanos = ' ';
		}
	else {
		if (difp > 0) {
			if (difciclo >= 0) { tanos = 'A segunda m√°quina √© sempre mais econ√≥mica'; }
			else tanos = 'A primeira m√°quina √© mais econ√≥mica ap√≥s mais de ' + Math.floor((-difp/difciclo)/freq*7/365) + ' anos.';
			}
		else {
			if (difciclo <= 0) { tanos = 'A primeira m√°quina √© sempre mais econ√≥mica.'; }
			else tanos = 'A segunda m√°quina √© mais econ√≥mica ap√≥s ' + Math.floor((-difp/difciclo)/freq*7/365) + ' anos.';
			}
		}
	document.getElementById('anos').innerText = tanos;
}
document.getElementById('mll').addEventListener('keyup', fmll);

</script>
</body>
</html>