<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Crédito à habitação na Saber Viver</title>
<style>
body {
	font: 1.25em/1.5em "Georgia", serif; 
	margin: 0 auto;
	max-width: 33em;
	padding: .25em 1.5em;
	color: #323232; }

header p a:first-child {
	font-family: monospace; 
	color: #fff;
	background-color: #1e90ff; 
	padding: .7em;
	border: .1em solid #1e90ff; }

header p a:first-child:hover {
	color: #1e90ff;
	background-color: inherit; 
	text-decoration: none; }

p, li { margin: 1.5em 0; }

li { list-style: square; }

li ul li { margin: 1em 0; }

a { color: #1e90ff; text-decoration: none; }

a:hover { text-decoration: underline; }

input { 
	font-family: inherit;
	font-size: 1em;
	width: 4em;
	text-align: right;
	border-width: 0 0 2px;
	border-color: #1e90ff;

}
</style>
<script>


</script>
</head>
<body">
<header><p><a href="/">tlim.pt</a></header>

<p>Prova de conceito para um artigo da <me>Saber Viver</em> sobre o montante máximo de crédito à habitação que uma leitora deve considerar.

<p>Idade máxima dos agregado familiar: <input type="text" value="30" id="idade" onchange="ch();"></input> anos.

<p>Rendimento mensal líquido do agregado familiar: <input type="text" value="1000" id="rendimento" onchange="ch();"></input> euros.

<p>Prestações mensais com outros créditos: <input type="text" value="0" id="presta" onchange="ch();"></input> euros.

<p><strong>Recomendação:</strong>

<p>Empréstimo máximo: <span id="emprestimomaximo">129599</span> euros.

<p>Prestação máxima: <span id="prestacaomaxima">400</span> euros.

<p>Prazo máximo: <span id="prazomaximo">40</span> anos.


<script>
function ch(){
18<=document.getElementById("idade").value&&70>document.getElementById("idade").value&&!isNaN(document.getElementById("idade").value)||(document.getElementById("idade").value=30);

100<=document.getElementById("rendimento").value&&1E6>=document.getElementById("rendimento").value&&!isNaN(document.getElementById("rendimento").value)||(document.getElementById("rendimento").value=1000);

0<=document.getElementById("presta").value&&!isNaN(document.getElementById("presta").value)||(document.getElementById("presta").value=0);

if (document.getElementById("rendimento").value * 1 <= document.getElementById("presta").value * 1 ) { document.getElementById("presta").value=0; }

var taeg = 2.11 / 100 / 12; //  https://www.bportugal.pt/Mobile/BPStat/Pesquisa.aspx?flt=taeg%20habita%C3%A7%C3%A3o

var pmax = 70; // idade máxima na maturidade 

var prazo;

prazo = 30 > document.getElementById("idade").value ? 40 : pmax - document.getElementById("idade").value;

var taxaesforco = .4;

var emprestimo = Math.round((taxaesforco * document.getElementById("rendimento").value - document.getElementById("presta").value) * (1 - Math.pow(1 + taeg, 12 * -prazo)) / taeg);

var prestacao = Math.round(emprestimo / ((1 - Math.pow(1 + taeg, 12 * -prazo)) / taeg));

document.getElementById("emprestimomaximo").innerHTML=emprestimo;

document.getElementById("prestacaomaxima").innerHTML=prestacao;

document.getElementById("prazomaximo").innerHTML=prazo};

window.onload = function() { ch(); }
</script>
</body>
</html>
